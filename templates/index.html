<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="chat-container">
        <h1>¡Hola! Soy tu chatbot</h1>
        <div id="chat-box" class="chat-box"></div>
        
        <div id="sugerencias" class="sugerencias">
            <h2>Preguntas sugeridas:</h2>
            <ul>
                <li onclick="hacerPregunta('¿Cuáles son los objetivos del reglamento académico?')">¿Cuáles son los objetivos del reglamento académico?</li>
                <li onclick="hacerPregunta('¿Qué modalidades de estudio ofrece la universidad?')">¿Qué modalidades de estudio ofrece la universidad?</li>
                <li onclick="hacerPregunta('¿Cómo se realiza la evaluación de los aprendizajes?')">¿Cómo se realiza la evaluación de los aprendizajes?</li>
                <li onclick="hacerPregunta('¿Qué se necesita para la admisión y matrícula?')">¿Qué se necesita para la admisión y matrícula?</li>
         </ul>
        </div>
        
        <input type="text" id="pregunta" placeholder="Hazme una pregunta..." />
        <button id="send-btn">Enviar</button>

        <img src="{{ url_for('static', filename='image.png') }}" alt="Estudiante Icono" id="estudiante-icon"> <!-- Icono del estudiante aquí -->
        <button onclick="mostrarFlujo()">Ver flujo del proceso de titulación</button>

    </div>
    
    <script>
        function mostrarFlujo() {
        const chatBox = document.getElementById('chat-box');
        chatBox.innerHTML += `<div class="message"><p><strong>Flujo del Proceso de Titulación:</strong></p><img src="{{ url_for('static', filename='flujo_titulacion.png') }}" alt="Flujo del Proceso de Titulación"></div>`;
        chatBox.scrollTop = chatBox.scrollHeight;
    }
        function hacerPregunta(pregunta) {
            document.getElementById('pregunta').value = pregunta;
            document.getElementById('send-btn').click();
        }

        document.getElementById('send-btn').onclick = async function() {
            const pregunta = document.getElementById('pregunta').value;
            const chatBox = document.getElementById('chat-box');

            // Mensaje del usuario
            chatBox.innerHTML += `<div class="message user-message"><p>${pregunta}</p></div>`;
            
            const response = await fetch('/ask', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ pregunta }),
            });
            const data = await response.json();

            // Mensaje del chatbot
            chatBox.innerHTML += `<div class="message"><p>${data.respuesta}</p></div>`;
            document.getElementById('pregunta').value = '';
            chatBox.scrollTop = chatBox.scrollHeight; // Desplazarse hacia abajo
        };
    </script>
</body>
</html>
